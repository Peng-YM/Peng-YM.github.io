<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Pioneer</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://peng-ym.github.io/"/>
  <updated>2018-04-10T03:13:48.420Z</updated>
  <id>http://peng-ym.github.io/</id>
  
  <author>
    <name>Peng-YM</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>微聚API设计</title>
    <link href="http://peng-ym.github.io/2018/04/10/%E5%BE%AE%E8%81%9AAPI%E8%AE%BE%E8%AE%A1/"/>
    <id>http://peng-ym.github.io/2018/04/10/微聚API设计/</id>
    <published>2018-04-10T03:12:48.000Z</published>
    <updated>2018-04-10T03:13:48.420Z</updated>
    
    <content type="html"><![CDATA[<h1 id="API-Design-Document-v0-1"><a href="#API-Design-Document-v0-1" class="headerlink" title="API Design Document v0.1"></a>API Design Document v0.1</h1><h2 id="Table-of-Content"><a href="#Table-of-Content" class="headerlink" title="Table of Content"></a>Table of Content</h2><p>[TOC]</p><h2 id="Conventions"><a href="#Conventions" class="headerlink" title="Conventions"></a>Conventions</h2><h3 id="1-Use-nouns-but-no-verbs"><a href="#1-Use-nouns-but-no-verbs" class="headerlink" title="1. Use nouns but no verbs"></a>1. Use nouns but no verbs</h3><table><thead><tr><th>Resource</th><th>GET (read)</th><th>POST (create)</th><th>PATCH (update)</th><th>DELETE</th></tr></thead><tbody><tr><td>/cars</td><td>Return a list of cars</td><td>Create a new car</td><td>Bulk update of cars</td><td>Delete all cars</td></tr><tr><td>/cars/1</td><td>Return car id = 1</td><td>Method not allowed (405)</td><td>Update car id = 1</td><td>Delete car id = 1</td></tr></tbody></table><p>Do not use verbs:</p><p><strong>Bad Examples!</strong></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/getAllCars</span><br><span class="line">/createNewCar</span><br><span class="line">/deleteAllCar</span><br></pre></td></tr></table></figure><h3 id="2-Use-plural-nouns"><a href="#2-Use-plural-nouns" class="headerlink" title="2. Use plural nouns"></a>2. Use plural nouns</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/carsYES</span><br><span class="line">/car NO!!!!</span><br></pre></td></tr></table></figure><h3 id="3-Use-sub-resources-for-relations"><a href="#3-Use-sub-resources-for-relations" class="headerlink" title="3. Use sub-resources for relations"></a>3. Use sub-resources for relations</h3><ul><li><code>GET /cars/711/drivers/</code>  Returns a list of drivers for car 711.</li><li><code>GET /cars/711/drivers/4</code> Returns driver #4 for car 711.</li></ul><h3 id="4-Provide-filtering-sorting-and-paging-for-collections"><a href="#4-Provide-filtering-sorting-and-paging-for-collections" class="headerlink" title="4. Provide filtering, sorting and paging for collections"></a>4. Provide filtering, sorting and paging for collections</h3><p><strong>Filtering:</strong></p><ul><li><code>GET /cars?color=red</code> Returns a list of red cars.</li><li><code>GET /cars?seats&lt;=2</code> Returns a list of cars with a maximum of 2 seats</li></ul><p><strong>Sorting:</strong></p><p>Allow ascending and descending sorting over multiple fields.</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /cars?sort=-manufactorer,+model</span><br></pre></td></tr></table></figure><p> Returns a list of cars sorted by descending manufacturers and ascending models.</p><p><strong>Paging:</strong></p><p><strong>Do not allow user to retrieve all the data in one request by default</strong>. Instead, GET operations, which return a list of requested items, return only the first 25(or another value) items.</p><table><thead><tr><th>URL</th><th>Description</th></tr></thead><tbody><tr><td>/cars</td><td>Return the first 25 cars</td></tr><tr><td>/cars?limit=10</td><td>Return the first 10 cars</td></tr><tr><td>/cars?offset=5</td><td>Return cars from No.6 to No. 31</td></tr><tr><td>/cars?offset=10&amp;limit=5</td><td>Return cars from No.6 to No. 10</td></tr></tbody></table><p>To page through all available items, use the metadata section of the JSON response to get total number of items. For example, <code>&quot;total&quot;: 77</code> means there are 77 cars in the database.</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"meta"</span>: &#123;</span><br><span class="line">        <span class="attr">"result_set"</span>: &#123;</span><br><span class="line">            <span class="attr">"count"</span>: <span class="number">2</span>,</span><br><span class="line">            <span class="attr">"offset"</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="attr">"limit"</span>: <span class="number">2</span>,</span><br><span class="line">            <span class="attr">"total"</span>: <span class="number">77</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"data"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">        <span class="attr">"id"</span>: <span class="string">"uuid1"</span>,</span><br><span class="line">            <span class="attr">"model"</span>: <span class="string">"Benz"</span></span><br><span class="line">    &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"id"</span>: <span class="string">"uuid2"</span>,</span><br><span class="line">            <span class="attr">"model"</span>: <span class="string">"Lamborghini"</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Note:</strong> Send GET request to  <code>/cars?limit=0</code> to get a json that just contains metadata.</p><h3 id="5-Versioning-the-API"><a href="#5-Versioning-the-API" class="headerlink" title="5. Versioning the API"></a>5. Versioning the API</h3><p>Make the API Version mandatory and do not release an unversioned API. Use a simple ordinal number.</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/api/v1</span><br></pre></td></tr></table></figure><h3 id="6-Handle-Errors-with-HTTP-status-codes"><a href="#6-Handle-Errors-with-HTTP-status-codes" class="headerlink" title="6. Handle Errors with HTTP status codes"></a>6. Handle Errors with HTTP status codes</h3><p><strong>Useful status codes</strong></p><ul><li>200 – OK – Eyerything is working</li><li>201 – OK – New resource has been <strong>created</strong></li><li>204 – OK – The resource was successfully <strong>deleted</strong></li><li>304 – <strong>Not Modified</strong> – The client can use cached data</li><li>401 – <strong>Unauthorized</strong> – The request requires an user authentication</li><li>403 – <strong>Forbidden</strong> – The server understood the request, but is refusing it or the access is not allowed.</li><li>404 – <strong>Not found</strong> – There is no resource behind the URI.</li><li>500 – <strong>Internal Server Error</strong> –  You should avoid this error. If an error occurs in the global catch blog, the stracktrace should be logged and not returned as response.</li><li>400 – <strong>Bad Request</strong> – The request was invalid or cannot be served. <strong>The exact error should be explained in the error payload.</strong></li></ul><p><strong>Error payloads</strong></p><p>All exceptions should be mapped in an error payload. Here is an example how a JSON payload should look like.</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"errors"</span>: [&#123;</span><br><span class="line">        <span class="attr">"title"</span>: <span class="string">"This is a short human readable msg, MUST not be empty"</span>,</span><br><span class="line">        <span class="attr">"detail"</span>: <span class="string">"This is human readable detail msg, can be empty"</span>,</span><br><span class="line">        <span class="attr">"status"</span>: <span class="number">404</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="JSON-Specifications"><a href="#JSON-Specifications" class="headerlink" title="JSON Specifications"></a>JSON Specifications</h2><p><a href="http://jsonapi.org/format/" target="_blank" rel="noopener">Specifications</a></p><h2 id="API"><a href="#API" class="headerlink" title="API"></a>API</h2><h4 id="Template"><a href="#Template" class="headerlink" title="Template"></a>Template</h4><p><strong>Description:</strong></p><p><strong>Request:</strong></p><ul><li><p>URI</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>Body</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong>Response:</strong></p><ul><li><p>Status Code:</p></li><li><p>Body</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong>Errors:</strong></p><ul><li><p>Status Code:</p></li><li><p>Body</p></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"errors"</span>: [&#123;</span><br><span class="line">        <span class="attr">"title"</span>: <span class="string">"This is a short human readable msg, MUST not be empty"</span>,</span><br><span class="line">        <span class="attr">"detail"</span>: <span class="string">"This is human readable detail msg, can be empty"</span>,</span><br><span class="line">        <span class="attr">"status"</span>: <span class="number">404</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Users"><a href="#Users" class="headerlink" title="Users"></a>Users</h3><h4 id="1-Registration"><a href="#1-Registration" class="headerlink" title="1. Registration"></a>1. Registration</h4><p><strong>Description:</strong></p><p><strong>Request:</strong></p><ul><li><p>URI</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">POST /api/v1/users/</span><br></pre></td></tr></table></figure></li><li><p>Body</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"data"</span>: &#123;</span><br><span class="line">        <span class="attr">"id"</span>: <span class="string">"uuid"</span>,</span><br><span class="line">        <span class="attr">"email"</span>: <span class="string">"example@xxx.com"</span>,</span><br><span class="line">        <span class="attr">"password"</span>: <span class="string">"xxx"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong>Response:</strong></p><ul><li><p>Status Code: 201</p></li><li><p>Body</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"data"</span>: &#123;</span><br><span class="line">        <span class="attr">"id"</span>: <span class="string">"uuid"</span>,</span><br><span class="line">        <span class="attr">"email"</span>: <span class="string">"example@xxx.com"</span>,</span><br><span class="line">        <span class="attr">"password"</span>: <span class="string">"xxx"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong>Errors:</strong></p><ul><li><p>Email exists    </p></li><li><p>Status Code: 404  </p></li><li><p>Body:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"errors"</span>: [&#123;</span><br><span class="line">        <span class="attr">"title"</span>: <span class="string">"This email has already been registered"</span>,</span><br><span class="line">        <span class="attr">"detail"</span>: <span class="string">"can not insert into users,violate email unique constrain"</span>,</span><br><span class="line">        <span class="attr">"status"</span>: <span class="number">404</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="2-Login"><a href="#2-Login" class="headerlink" title="2. Login"></a>2. Login</h4><p><strong>Description:</strong></p><p><strong>Request:</strong></p><ul><li><p>URI</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">POST /api/v1/sessions</span><br></pre></td></tr></table></figure></li><li><p>Body</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"data"</span>: &#123;</span><br><span class="line">        <span class="attr">"email"</span>: <span class="string">"example@xxx.com"</span>,</span><br><span class="line">        <span class="attr">"password"</span>: <span class="string">"xxx"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong>Response:</strong></p><ul><li><p>Status Code: 200</p></li><li><p>Body</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"data"</span>: &#123;</span><br><span class="line">        <span class="attr">"id"</span>: <span class="string">"user_id"</span>,</span><br><span class="line">        <span class="attr">"token"</span>: <span class="string">"xxx"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong>Errors:</strong></p><ul><li>email not registered</li><li>Status Code: 400</li><li>Body</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"errors"</span>: [&#123;</span><br><span class="line">        <span class="attr">"title"</span>: <span class="string">"email not registered"</span>,</span><br><span class="line">        <span class="attr">"detail"</span>: <span class="string">"can not find email in users"</span>,</span><br><span class="line">        <span class="attr">"status"</span>: <span class="number">400</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>wrong password</li><li>Status Code: 400</li><li>Body<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"errors"</span>: [&#123;</span><br><span class="line">        <span class="attr">"title"</span>: <span class="string">"email password does not match"</span>,</span><br><span class="line">        <span class="attr">"detail"</span>: <span class="string">"email password does not match"</span>,</span><br><span class="line">        <span class="attr">"status"</span>: <span class="number">400</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="3-Get-User-Profiles"><a href="#3-Get-User-Profiles" class="headerlink" title="3. Get User Profiles"></a>3. Get User Profiles</h4><p><strong>Description:</strong></p><p><strong>Request:</strong></p><ul><li><p>URI</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /api/v1/users/&#123;id&#125;</span><br></pre></td></tr></table></figure></li><li><p>Body</p><p>EMPTY</p></li></ul><p><strong>Response:</strong></p><ul><li><p>Status Code: 200</p></li><li><p>Body</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"data"</span>: &#123;</span><br><span class="line">        <span class="attr">"id"</span>: <span class="string">"xxx"</span>,</span><br><span class="line">        <span class="attr">"username"</span>: <span class="string">"xxx"</span>,</span><br><span class="line">        <span class="attr">"email"</span>: <span class="string">"example@xxx.com"</span>,</span><br><span class="line">        <span class="attr">"phone"</span>: <span class="string">"1234567890"</span>,</span><br><span class="line">        <span class="attr">"credit"</span>: <span class="number">100</span>,</span><br><span class="line">        <span class="attr">"balance"</span>: <span class="number">100</span>,</span><br><span class="line">        <span class="attr">"nickname"</span>:<span class="string">"xxx"</span>,</span><br><span class="line">        <span class="attr">"level"</span>:<span class="number">0</span>,</span><br><span class="line">        <span class="attr">"avatar"</span>:<span class="string">"URL"</span>,</span><br><span class="line">        <span class="attr">"register_date"</span>:<span class="string">"xxx"</span>,</span><br><span class="line">        <span class="attr">"gender"</span>:<span class="number">1</span>,</span><br><span class="line">        <span class="attr">"level"</span>:<span class="number">0</span>,</span><br><span class="line">        <span class="attr">"privilege"</span>:<span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong>Errors:</strong></p><ul><li><p>No such user</p></li><li><p>Status Code: 404</p></li><li><p>Body</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"errors"</span>: [&#123;</span><br><span class="line">        <span class="attr">"title"</span>: <span class="string">"No such user"</span>,</span><br><span class="line">        <span class="attr">"detail"</span>: <span class="string">"No such user"</span>,</span><br><span class="line">        <span class="attr">"status"</span>: <span class="number">404</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>Permission denied</p></li><li><p>Status Code: 401</p></li><li>Body<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"errors"</span>: [&#123;</span><br><span class="line">        <span class="attr">"title"</span>: <span class="string">"Please login"</span>,</span><br><span class="line">        <span class="attr">"detail"</span>: <span class="string">"Permission denied"</span>,</span><br><span class="line">        <span class="attr">"status"</span>: <span class="number">401</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="4-Update-User-Profiles"><a href="#4-Update-User-Profiles" class="headerlink" title="4. Update User Profiles"></a>4. Update User Profiles</h4><p><strong>Description:</strong></p><ul><li>Some infomation such as email, user balance <strong>MUST</strong> not be updated by this way!</li><li><strong>Only</strong> the fields that appears in the JSON body should be updated!</li></ul><p><strong>Request:</strong></p><ul><li><p>URI</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PATCH /api/v1/users/&#123;id&#125;</span><br></pre></td></tr></table></figure></li><li><p>Body</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"data"</span>: &#123;</span><br><span class="line">        <span class="attr">"id"</span>: <span class="string">"xxx"</span>,</span><br><span class="line">        <span class="attr">"username"</span>: <span class="string">"xxx"</span>,</span><br><span class="line">        <span class="attr">"password"</span>: <span class="string">"xxx"</span>,</span><br><span class="line">        <span class="attr">"phone"</span>: <span class="string">"1234567890"</span>,</span><br><span class="line">        <span class="attr">"credit"</span>: <span class="number">100</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong>Response:</strong></p><ul><li><p>Status Code: 200 OK</p></li><li><p>Body</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"data"</span>: &#123;</span><br><span class="line">        <span class="attr">"id"</span>: <span class="string">"xxx"</span>,</span><br><span class="line">        <span class="attr">"type"</span>: <span class="string">"user"</span>,</span><br><span class="line">        <span class="attr">"username"</span>: <span class="string">"xxx"</span>,</span><br><span class="line">        <span class="attr">"email"</span>: <span class="string">"example@xxx.com"</span>,</span><br><span class="line">        <span class="attr">"phone"</span>: <span class="string">"1234567890"</span>,</span><br><span class="line">        <span class="attr">"credit"</span>: <span class="number">100</span>,</span><br><span class="line">        <span class="attr">"balance"</span>: <span class="number">100</span>,</span><br><span class="line">        <span class="attr">"nickname"</span>:<span class="string">"xxx"</span>,</span><br><span class="line">        <span class="attr">"level"</span>:<span class="number">0</span>,</span><br><span class="line">        <span class="attr">"avatar"</span>:<span class="string">"URL"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong>Errors:</strong></p><ul><li><p>Permission denied</p></li><li><p>Status Code: 401</p></li><li>Body<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"errors"</span>: [&#123;</span><br><span class="line">        <span class="attr">"title"</span>: <span class="string">"Please login"</span>,</span><br><span class="line">        <span class="attr">"detail"</span>: <span class="string">"Permission denied"</span>,</span><br><span class="line">        <span class="attr">"status"</span>: <span class="number">401</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="Pictures"><a href="#Pictures" class="headerlink" title="Pictures"></a>Pictures</h3><h4 id="1-Get-a-Picture"><a href="#1-Get-a-Picture" class="headerlink" title="1. Get a Picture"></a>1. Get a Picture</h4><p><strong>Description:</strong></p><p><strong>Request:</strong></p><ul><li><p>URI</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /api/pictures/&#123;picture_url&#125;</span><br></pre></td></tr></table></figure></li><li><p>Body</p><p>EMPTY</p></li></ul><p><strong>Response:</strong></p><ul><li><p>Status Code:  200 OK</p></li><li><p>Body</p><p>Binary image file</p></li></ul><p><strong>Errors:</strong></p><ul><li><p>Permission denied</p></li><li><p>Status Code: 401</p></li><li><p>Body</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"errors"</span>: [&#123;</span><br><span class="line">        <span class="attr">"title"</span>: <span class="string">"Please login"</span>,</span><br><span class="line">        <span class="attr">"detail"</span>: <span class="string">"Permission denied"</span>,</span><br><span class="line">        <span class="attr">"status"</span>: <span class="number">401</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>File not found</p></li><li><p>Status Code: 404</p></li><li><p>Body</p></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"errors"</span>: [&#123;</span><br><span class="line">        <span class="attr">"title"</span>: <span class="string">"File not found"</span>,</span><br><span class="line">        <span class="attr">"detail"</span>: <span class="string">"File not found"</span>,</span><br><span class="line">        <span class="attr">"status"</span>: <span class="number">404</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-Batch-Get-Pictures"><a href="#2-Batch-Get-Pictures" class="headerlink" title="2. Batch Get Pictures"></a>2. Batch Get Pictures</h4><p><strong>Step 1</strong></p><p><strong>Request:</strong></p><ul><li><p>URI</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">POST /api/v1/batchasks</span><br></pre></td></tr></table></figure></li><li><p>Body</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"data"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"method"</span>: <span class="string">"GET"</span>,</span><br><span class="line">            <span class="attr">"url"</span>: <span class="string">"/api/v1/pictures/&#123;picture_url1&#125;"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"method"</span>: <span class="string">"GET"</span>,</span><br><span class="line">            <span class="attr">"url"</span>: <span class="string">"/api/v1/pictures/&#123;picture_url1&#125;"</span></span><br><span class="line">        &#125;,</span><br><span class="line">    ]    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong>Response:</strong></p><ul><li><p>Status Code: 201 Created</p></li><li><p>Body</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"data"</span>: &#123;</span><br><span class="line">        <span class="attr">"url"</span>: <span class="string">"/api/v1/batchasks/&#123;ask_id&#125;"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong>Step 2</strong></p><p><strong>Request:</strong></p><ul><li><p>URI</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET http://example.com/api/batchtask/&#123;ask_id&#125;</span><br></pre></td></tr></table></figure></li><li><p>Body</p><p>EMPTY</p></li></ul><p><strong>Response:</strong></p><ul><li><p>Status Code: 200 OK</p></li><li><p>Body</p><p>A <strong>zip file</strong> that contains the resources asked by user.</p></li></ul><p><strong>ERRORS:</strong></p><ul><li><p>Permission denied</p></li><li><p>Status Code: 401</p></li><li><p>Body</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"errors"</span>: [&#123;</span><br><span class="line">        <span class="attr">"title"</span>: <span class="string">"Please login"</span>,</span><br><span class="line">        <span class="attr">"detail"</span>: <span class="string">"Permission denied"</span>,</span><br><span class="line">        <span class="attr">"status"</span>: <span class="number">401</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>File not found</p></li><li><p>Status Code: 404</p></li><li><p>Body</p></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"errors"</span>: [&#123;</span><br><span class="line">        <span class="attr">"title"</span>: <span class="string">"File not found"</span>,</span><br><span class="line">        <span class="attr">"detail"</span>: <span class="string">"File not found"</span>,</span><br><span class="line">        <span class="attr">"status"</span>: <span class="number">404</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-Delete-a-picture"><a href="#3-Delete-a-picture" class="headerlink" title="3. Delete a picture"></a>3. Delete a picture</h4><p><strong>Description:</strong></p><p><strong>Request:</strong></p><ul><li><p>URI</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETE /api/v1/pictures/&#123;picture_url&#125;</span><br></pre></td></tr></table></figure></li><li><p>Body</p><p>EMPTY</p></li></ul><p><strong>Response:</strong></p><ul><li><p>Status Code: 204 DELETED</p></li><li><p>Body</p><p>EMPTY</p></li></ul><p><strong>Errors:</strong></p><ul><li><p>Permission denied</p></li><li><p>Status Code: 401</p></li><li><p>Body</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"errors"</span>: [&#123;</span><br><span class="line">        <span class="attr">"title"</span>: <span class="string">"Please login"</span>,</span><br><span class="line">        <span class="attr">"detail"</span>: <span class="string">"Permission denied"</span>,</span><br><span class="line">        <span class="attr">"status"</span>: <span class="number">401</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>File not found</p></li><li><p>Status Code: 404</p></li><li><p>Body</p></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"errors"</span>: [&#123;</span><br><span class="line">        <span class="attr">"title"</span>: <span class="string">"File not found"</span>,</span><br><span class="line">        <span class="attr">"detail"</span>: <span class="string">"File not found"</span>,</span><br><span class="line">        <span class="attr">"status"</span>: <span class="number">404</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Tasks"><a href="#Tasks" class="headerlink" title="Tasks"></a>Tasks</h3><h4 id="1-Create-a-Task"><a href="#1-Create-a-Task" class="headerlink" title="1. Create a Task"></a>1. Create a Task</h4><p><strong>Description:</strong><br>create a collection task or annnotation task.<br>TODO: XML standard (URL of pictures,task labels)</p><p><strong>Request:</strong></p><ul><li><p>URI</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">POST /api/v1/tasks</span><br></pre></td></tr></table></figure></li><li><p>Body</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"data"</span>: &#123;</span><br><span class="line">        <span class="attr">"id"</span>: <span class="string">"uuid"</span>,</span><br><span class="line">        <span class="attr">"xml"</span>: <span class="string">"xxxx"</span>,</span><br><span class="line">        <span class="attr">"title"</span>: <span class="string">"xxx"</span>,</span><br><span class="line">        <span class="attr">"start"</span>: <span class="string">"xxxx"</span>,</span><br><span class="line">        <span class="attr">"end"</span>: <span class="string">"xxx"</span>,</span><br><span class="line">        <span class="attr">"descriptions"</span>: <span class="string">"xxx"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong>Response:</strong></p><ul><li><p>Status Code:  201 Created</p></li><li><p>Body</p><p>EMPTY</p></li></ul><p><strong>Errors:</strong></p><ul><li><p>Permission denied</p></li><li><p>Status Code: 401</p></li><li><p>Body</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"errors"</span>: [&#123;</span><br><span class="line">        <span class="attr">"title"</span>: <span class="string">"Please login"</span>,</span><br><span class="line">        <span class="attr">"detail"</span>: <span class="string">"Permission denied"</span>,</span><br><span class="line">        <span class="attr">"status"</span>: <span class="number">401</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>File not found</p></li><li><p>Status Code: 404</p></li><li><p>Body</p></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"errors"</span>: [&#123;</span><br><span class="line">        <span class="attr">"title"</span>: <span class="string">"File not found"</span>,</span><br><span class="line">        <span class="attr">"detail"</span>: <span class="string">"picture url not exists"</span>,</span><br><span class="line">        <span class="attr">"status"</span>: <span class="number">404</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-Get-Pictures-Related-to-a-Tasks"><a href="#2-Get-Pictures-Related-to-a-Tasks" class="headerlink" title="2. Get Pictures Related to a Tasks"></a>2. Get Pictures Related to a Tasks</h4><p>The links of the pictures should be contained in the xml file of the task.</p><h4 id="3-Get-tasks-id-multiple"><a href="#3-Get-tasks-id-multiple" class="headerlink" title="3. Get tasks id multiple"></a>3. <em>Get tasks id multiple</em></h4><p>Init task window.<br>初始化界面时可能会需要请求任务信息，后端返回任务id，需要完善。</p><h4 id="4-Get-task-Profiles"><a href="#4-Get-task-Profiles" class="headerlink" title="4. Get task Profiles"></a>4. Get task Profiles</h4><p><strong>Description:</strong></p><p><strong>Request:</strong></p><ul><li><p>URI</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /api/v1/tasks/&#123;task_id&#125;</span><br></pre></td></tr></table></figure></li><li><p>Body</p><p>EMPTY</p></li></ul><p><strong>Response:</strong></p><ul><li><p>Status Code: 200</p></li><li><p>Body</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;   <span class="attr">"meta"</span>:&#123;<span class="attr">"label number"</span>:<span class="number">5</span>&#125;,</span><br><span class="line">    <span class="attr">"data"</span>: &#123;</span><br><span class="line">        <span class="attr">"id"</span>: <span class="string">"xxx"</span>,</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"xxx"</span>,</span><br><span class="line">        <span class="attr">"description"</span>: <span class="string">"xxx"</span>,</span><br><span class="line">        <span class="attr">"start_time"</span>: <span class="string">"1234567890"</span>,</span><br><span class="line">        <span class="attr">"type"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"size"</span>: <span class="number">100</span>,</span><br><span class="line">        <span class="attr">"data_path"</span>:<span class="string">"xxx"</span>,</span><br><span class="line">        <span class="attr">"creater"</span>:<span class="number">0</span>,</span><br><span class="line">        <span class="attr">"progress"</span>:<span class="number">20</span>,</span><br><span class="line">        <span class="attr">"labels"</span>:[<span class="string">"label1"</span>,<span class="string">"label2"</span>,<span class="string">"label3..."</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong>Errors:</strong></p><ul><li><p>No such task</p></li><li><p>Status Code: 404</p></li><li><p>Body</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"errors"</span>: [&#123;</span><br><span class="line">        <span class="attr">"title"</span>: <span class="string">"No such task"</span>,</span><br><span class="line">        <span class="attr">"detail"</span>: <span class="string">"No such task"</span>,</span><br><span class="line">        <span class="attr">"status"</span>: <span class="number">404</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>Permission denied</p></li><li><p>Status Code: 401</p></li><li>Body<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"errors"</span>: [&#123;</span><br><span class="line">        <span class="attr">"title"</span>: <span class="string">"Please login"</span>,</span><br><span class="line">        <span class="attr">"detail"</span>: <span class="string">"Permission denied"</span>,</span><br><span class="line">        <span class="attr">"status"</span>: <span class="number">401</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="5-Update-task-Profiles"><a href="#5-Update-task-Profiles" class="headerlink" title="5. Update task Profiles"></a>5. <del>Update task Profiles</del></h4><p><strong>Description:</strong></p><ul><li>Some infomation such as progress, labels <strong>MUST</strong> not be updated by this way!</li><li><strong>Only</strong> the fields that appears in the JSON body should be updated!</li></ul><p><strong>Request:</strong></p><ul><li><p>URI</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PATCH /api/v1/tasks/&#123;id&#125;</span><br></pre></td></tr></table></figure></li><li><p>Body</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"data"</span>: &#123;</span><br><span class="line">        <span class="attr">"id"</span>: <span class="string">"xxx"</span>,</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"xxx"</span>,</span><br><span class="line">        <span class="attr">"description"</span>: <span class="string">"xxx"</span>,</span><br><span class="line">        <span class="attr">"size"</span>: <span class="number">100</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong>Response:</strong></p><ul><li><p>Status Code: 200 OK</p></li><li><p>Body</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;   <span class="attr">"meta"</span>:&#123;<span class="attr">"label number"</span>:<span class="number">5</span>&#125;,</span><br><span class="line">    <span class="attr">"data"</span>: &#123;</span><br><span class="line">        <span class="attr">"id"</span>: <span class="string">"xxx"</span>,</span><br><span class="line">        <span class="attr">"type"</span>: <span class="string">"task"</span>,</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"xxx"</span>,</span><br><span class="line">        <span class="attr">"description"</span>: <span class="string">"xxx"</span>,</span><br><span class="line">        <span class="attr">"start_time"</span>: <span class="string">"1234567890"</span>,</span><br><span class="line">        <span class="attr">"type"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"size"</span>: <span class="number">100</span>,</span><br><span class="line">        <span class="attr">"data_path"</span>:<span class="string">"xxx"</span>,</span><br><span class="line">        <span class="attr">"creater"</span>:<span class="number">0</span>,</span><br><span class="line">        <span class="attr">"progress"</span>:<span class="number">20</span>,</span><br><span class="line">        <span class="attr">"labels"</span>:[<span class="string">"label1"</span>,<span class="string">"label2"</span>,<span class="string">"label3..."</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong>Errors:</strong></p><ul><li><p>Permission denied</p></li><li><p>Status Code: 401</p></li><li>Body<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"errors"</span>: [&#123;</span><br><span class="line">        <span class="attr">"title"</span>: <span class="string">"Please login"</span>,</span><br><span class="line">        <span class="attr">"detail"</span>: <span class="string">"Permission denied"</span>,</span><br><span class="line">        <span class="attr">"status"</span>: <span class="number">401</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="Commits"><a href="#Commits" class="headerlink" title="Commits"></a>Commits</h3><h4 id="1-Upload-a-commit"><a href="#1-Upload-a-commit" class="headerlink" title="1. Upload a commit"></a>1. Upload a commit</h4><p><strong>Description:</strong><br>Finish a subtask and upload.</p><p><strong>Request:</strong></p><ul><li><p>URI</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">POST /api/commits</span><br></pre></td></tr></table></figure></li><li><p>Body</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"data"</span>: &#123;</span><br><span class="line">        <span class="attr">"id"</span>: <span class="string">"commit_id"</span>,</span><br><span class="line">        <span class="attr">"task_id"</span>:<span class="string">"uuid"</span>,</span><br><span class="line">        <span class="attr">"author_id"</span>: <span class="string">"uuid"</span>,</span><br><span class="line">        <span class="attr">"result"</span>:[</span><br><span class="line">            &#123;</span><br><span class="line">               <span class="attr">"picture_url"</span>: <span class="string">"uuid"</span>,</span><br><span class="line">        <span class="attr">"xml"</span>: <span class="string">"xxx"</span> </span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong>Response:</strong></p><ul><li><p>Status Code:  201 CREATED</p></li><li><p>Body</p><p>EMPTY</p></li></ul><p><strong>Errors:</strong></p><ul><li>Permission denied</li><li>Status Code: 401</li><li>Body<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"errors"</span>: [&#123;</span><br><span class="line">        <span class="attr">"title"</span>: <span class="string">"Please login"</span>,</span><br><span class="line">        <span class="attr">"detail"</span>: <span class="string">"Permission denied"</span>,</span><br><span class="line">        <span class="attr">"status"</span>: <span class="number">401</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="2-Get-User-Commits"><a href="#2-Get-User-Commits" class="headerlink" title="2. Get User Commits"></a>2. Get User Commits</h4><p><strong>Description:</strong></p><p><strong>Request:</strong></p><ul><li><p>URI</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /api/commits?user=&#123;user_id&#125;&amp;task=&#123;task_id&#125;</span><br></pre></td></tr></table></figure></li><li><p>Body</p><p>EMPTY</p></li></ul><p><strong>Response:</strong></p><ul><li><p>Status Code: 200 OK</p></li><li><p>Body</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"data"</span>: &#123;</span><br><span class="line">        <span class="attr">"id"</span>: <span class="string">"commit_id"</span>,</span><br><span class="line">        <span class="attr">"task_id"</span>: <span class="string">"uuid"</span>,</span><br><span class="line">        <span class="attr">"author_id"</span>: <span class="string">"uuid"</span>,</span><br><span class="line">        <span class="attr">"result"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="attr">"picture_url"</span>: <span class="string">"uuid"</span>,</span><br><span class="line">        <span class="attr">"xml"</span>: <span class="string">"xxx"</span>  </span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong>Errors:</strong></p><ul><li><p>Commits not found</p></li><li><p>Status Code:404</p></li><li><p>Body</p></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"errors"</span>: [&#123;</span><br><span class="line">        <span class="attr">"title"</span>: <span class="string">"You haven't take this task"</span>,</span><br><span class="line">        <span class="attr">"detail"</span>: <span class="string">"can not find commits of this task"</span>,</span><br><span class="line">        <span class="attr">"status"</span>: <span class="number">404</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;API-Design-Document-v0-1&quot;&gt;&lt;a href=&quot;#API-Design-Document-v0-1&quot; class=&quot;headerlink&quot; title=&quot;API Design Document v0.1&quot;&gt;&lt;/a&gt;API Design Doc
      
    
    </summary>
    
    
      <category term="Android" scheme="http://peng-ym.github.io/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>在Mac上使用tree命令浏览文件树结构(转)</title>
    <link href="http://peng-ym.github.io/2017/12/17/%E5%9C%A8Mac%E4%B8%8A%E4%BD%BF%E7%94%A8tree%E5%91%BD%E4%BB%A4%E6%B5%8F%E8%A7%88%E6%96%87%E4%BB%B6%E6%A0%91%E7%BB%93%E6%9E%84-%E8%BD%AC/"/>
    <id>http://peng-ym.github.io/2017/12/17/在Mac上使用tree命令浏览文件树结构-转/</id>
    <published>2017-12-17T05:27:57.000Z</published>
    <updated>2017-12-17T10:34:29.537Z</updated>
    
    <content type="html"><![CDATA[<h2 id="使用alias命令"><a href="#使用alias命令" class="headerlink" title="使用alias命令"></a>使用alias命令</h2><ol><li><p>编辑<code>.bashrc</code>或者<code>.zshrc</code>，在文件中添加一行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ vim .zshrc</span><br><span class="line"><span class="built_in">alias</span> tree=<span class="string">"find . -print | sed -e 's;[^/]*/;|____;g;s;____|; |;g'"</span></span><br></pre></td></tr></table></figure></li><li><p>应用更改</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">source</span> .zshrc</span><br></pre></td></tr></table></figure></li><li><p>在文件夹下使用<code>tree</code>命令就可以看到当前文件夹的层级结构了<br><img src="https://ws1.sinaimg.cn/large/c2dfc71dgy1fmjpgcu6dij20i50hqtaq.jpg" alt="效果图"></p></li></ol><h2 id="安装tree包"><a href="#安装tree包" class="headerlink" title="安装tree包"></a>安装tree包</h2><p>如果想要更多功能，可以直接使用unix的<code>tree</code>包。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew install tree</span><br></pre></td></tr></table></figure></p><p><a href="http://osxdaily.com/2016/09/09/view-folder-tree-terminal-mac-os-tree-equivalent/" target="_blank" rel="noopener">原文地址</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;使用alias命令&quot;&gt;&lt;a href=&quot;#使用alias命令&quot; class=&quot;headerlink&quot; title=&quot;使用alias命令&quot;&gt;&lt;/a&gt;使用alias命令&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;编辑&lt;code&gt;.bashrc&lt;/code&gt;或者&lt;code&gt;.zs
      
    
    </summary>
    
    
      <category term="折腾工具" scheme="http://peng-ym.github.io/tags/%E6%8A%98%E8%85%BE%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>利用Python IMAP、SMTP进行邮件收发</title>
    <link href="http://peng-ym.github.io/2017/12/15/%E5%88%A9%E7%94%A8Python-IMAP%E3%80%81SMTP%E8%BF%9B%E8%A1%8C%E9%82%AE%E4%BB%B6%E6%94%B6%E5%8F%91/"/>
    <id>http://peng-ym.github.io/2017/12/15/利用Python-IMAP、SMTP进行邮件收发/</id>
    <published>2017-12-14T16:54:47.000Z</published>
    <updated>2017-12-14T16:54:47.676Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Apache Htpd端口转发配置</title>
    <link href="http://peng-ym.github.io/2017/12/15/Centos%20Apache-Htpd%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%E9%85%8D%E7%BD%AE/"/>
    <id>http://peng-ym.github.io/2017/12/15/Centos Apache-Htpd端口转发配置/</id>
    <published>2017-12-14T16:53:26.000Z</published>
    <updated>2017-12-14T17:17:25.783Z</updated>
    
    <content type="html"><![CDATA[<h2 id="安装httpd"><a href="#安装httpd" class="headerlink" title="安装httpd"></a>安装httpd</h2><p>Centos 安装httpd非常简单，<code>yum</code>安装即可<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum instal httpd</span><br></pre></td></tr></table></figure></p><h2 id="配置转发规则示例"><a href="#配置转发规则示例" class="headerlink" title="配置转发规则示例"></a>配置转发规则示例</h2><p>在部署Java Web应用时，通常会把应用部署在一个Web容器（如Tomcat），再部署一个HTTP服务器转发请求。</p><p>例如部署Tomcat监听8080端口，部署Apache Httpd监听80端口，再转发给tomcat的8080端口。</p><p>可以在一台服务器上部署多个应用和配置多个域名，对于访问者来说感觉像访问两个不同的网站一样。<br>在示例中启动了两个Tomcat实例，分别监听8080和8081端口，部署两个不同的应用。然后将两个域名均指向这台机器的ip，Apache通过访问者使用的域名来执行不同的转发。</p><a id="more"></a><p>httpd的配置文件位于<code>/etc/httpd/conf/httpd.conf</code>，在文件中添加以下配置：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">NameVirtualHost *:80</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">VirtualHost</span> *<span class="attr">:80</span>&gt;</span></span><br><span class="line">    ServerName www.example.com</span><br><span class="line">    ServerAlias example.com *.example.com</span><br><span class="line">    ProxyPass / http://localhost:8080/</span><br><span class="line">    ProxyPassReverse / http://localhost:8080/</span><br><span class="line"><span class="tag">&lt;/<span class="name">VirtualHost</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">VirtualHost</span> *<span class="attr">:80</span>&gt;</span></span><br><span class="line">    ServerName www.example2.com</span><br><span class="line">    ServerAlias example2.com *.example2.com</span><br><span class="line">    ProxyPass / http://localhost:8081/</span><br><span class="line">    ProxyPassReverse / http://localhost:8081/</span><br><span class="line"><span class="tag">&lt;/<span class="name">VirtualHost</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h2 id="常见的问题"><a href="#常见的问题" class="headerlink" title="常见的问题"></a>常见的问题</h2><blockquote><p>Centos下apache启动时httpd: apr_sockaddr_info_get() failed报错</p></blockquote><p>解决办法：<a href="https://www.adminsehow.com/2011/03/how-to-fix-starting-httpd-httpd-apr_sockaddr_info_get-failed/" target="_blank" rel="noopener">reference</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> www.example.com &gt; /etc/hostname</span><br><span class="line">/bin/hostname -F /etc/hostname</span><br><span class="line">/etc/init.d/httpd restart</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;安装httpd&quot;&gt;&lt;a href=&quot;#安装httpd&quot; class=&quot;headerlink&quot; title=&quot;安装httpd&quot;&gt;&lt;/a&gt;安装httpd&lt;/h2&gt;&lt;p&gt;Centos 安装httpd非常简单，&lt;code&gt;yum&lt;/code&gt;安装即可&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;yum instal httpd&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;配置转发规则示例&quot;&gt;&lt;a href=&quot;#配置转发规则示例&quot; class=&quot;headerlink&quot; title=&quot;配置转发规则示例&quot;&gt;&lt;/a&gt;配置转发规则示例&lt;/h2&gt;&lt;p&gt;在部署Java Web应用时，通常会把应用部署在一个Web容器（如Tomcat），再部署一个HTTP服务器转发请求。&lt;/p&gt;
&lt;p&gt;例如部署Tomcat监听8080端口，部署Apache Httpd监听80端口，再转发给tomcat的8080端口。&lt;/p&gt;
&lt;p&gt;可以在一台服务器上部署多个应用和配置多个域名，对于访问者来说感觉像访问两个不同的网站一样。&lt;br&gt;在示例中启动了两个Tomcat实例，分别监听8080和8081端口，部署两个不同的应用。然后将两个域名均指向这台机器的ip，Apache通过访问者使用的域名来执行不同的转发。&lt;/p&gt;
    
    </summary>
    
    
      <category term="服务器" scheme="http://peng-ym.github.io/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>tmux使用指南</title>
    <link href="http://peng-ym.github.io/2017/12/15/tmux%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/"/>
    <id>http://peng-ym.github.io/2017/12/15/tmux使用指南/</id>
    <published>2017-12-14T16:18:56.000Z</published>
    <updated>2018-04-08T13:23:04.309Z</updated>
    
    <content type="html"><![CDATA[<h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>Tmux 简单来说就是终端里的『窗口管理器』，如果我使用终端登录到远程主机并运行前台程序，那么这个窗口等于就被占用了，想要看一下 CPU 的使用率，就得再连接一次。但是如果在远程主机上运行 tmux，那么就可以开启多个控制台（类似于窗口），相当高效。可以通过下面的视频看看大神操作：</p><center><iframe width="600" height="400" src="https://www.youtube.com/embed/JXwS7z6Dqic" frameborder="0" gesture="media" allow="encrypted-media" allowfullscreen></iframe></center><a id="more"></a><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>使用包管理工具安装即可。例如：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install tmux</span><br></pre></td></tr></table></figure></p><h2 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h2><blockquote><p>帮助信息</p><ul><li><code>tmux list-keys</code> 列出所有可以的快捷键和其运行的 tmux 命令</li><li><code>tmux list-commands</code> 列出所有的 tmux 命令及其参数</li><li><code>tmux info</code> 列出所有的 session, window, pane, 运行的进程号，等。</li></ul></blockquote><p>更常用的是在 tmux 中直接通过默认前缀 <code>ctrl + b</code> （因为<code>ctrl + b</code>不好按，下面我会将它更改为 <code>ctr + a</code>）之后输入对应命令来操作，具体如下（这里只列出输入默认前缀之后需要输入的操作）：</p><blockquote><p>基本操作：</p><ul><li><code>?</code> 列出所有快捷键</li><li><code>:</code> 进入命令模式</li><li><code>ctrl + z</code> 挂起当前session</li></ul><p>窗口操作</p><ul><li><code>c</code> 创建</li><li><code>&amp;</code> 关闭</li><li><code>[0-9]</code> 切换至指定窗口</li><li><code>p</code> 上一窗口</li><li><code>n</code> 下一窗口</li><li><code>w</code> 窗口列表</li></ul></blockquote><h2 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h2><p>系统范围的配置文件是 /etc/tmux.conf，而针对个人的配置文件在 ~/.tmux.conf。</p><p>通过配置文件，可以定义新的快捷键，定义窗口、窗格布局等。</p><p><strong>推荐配置</strong><br><a href="https://github.com/gpakosz/.tmux" target="_blank" rel="noopener">https://github.com/gpakosz/.tmux</a><br>效果图如下：<br><img src="http://ww1.sinaimg.cn/large/c2dfc71dly1fq5kd5qeldg21d60bi1kx.gif" alt="Demo"></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;介绍&quot;&gt;&lt;a href=&quot;#介绍&quot; class=&quot;headerlink&quot; title=&quot;介绍&quot;&gt;&lt;/a&gt;介绍&lt;/h2&gt;&lt;p&gt;Tmux 简单来说就是终端里的『窗口管理器』，如果我使用终端登录到远程主机并运行前台程序，那么这个窗口等于就被占用了，想要看一下 CPU 的使用率，就得再连接一次。但是如果在远程主机上运行 tmux，那么就可以开启多个控制台（类似于窗口），相当高效。可以通过下面的视频看看大神操作：&lt;/p&gt;
&lt;center&gt;&lt;iframe width=&quot;600&quot; height=&quot;400&quot; src=&quot;https://www.youtube.com/embed/JXwS7z6Dqic&quot; frameborder=&quot;0&quot; gesture=&quot;media&quot; allow=&quot;encrypted-media&quot; allowfullscreen&gt;&lt;/iframe&gt;&lt;/center&gt;
    
    </summary>
    
    
      <category term="折腾工具" scheme="http://peng-ym.github.io/tags/%E6%8A%98%E8%85%BE%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
</feed>
